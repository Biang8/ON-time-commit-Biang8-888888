name: lwxread

on:
  schedule:
    - cron: '00 14 * * *'           # æ™šé—´ä»»åŠ¡ï¼š22:00ï¼ˆæ¯å¤©ï¼‰
    - cron: '0 21 * * 1-5'          # æ—©é—´ä»»åŠ¡ï¼š05:00ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰
    - cron: '40 3 * * 1-5'          # åˆé—´ä»»åŠ¡ï¼š11:40ï¼ˆå‘¨ä¸€åˆ°å‘¨äº”ï¼‰
    - cron: '0 9 * * sat,sun'       # å‘¨æœ«ä»»åŠ¡ï¼š17:00ï¼ˆå‘¨å…­/æ—¥ï¼‰
    - cron: '0 0 * * sat,sun'       # å‘¨éšæœºä»»åŠ¡ï¼š08:00ï¼ˆå‘¨æœ«ï¼‰
  workflow_dispatch:
    description: æ‰‹åŠ¨è§¦å‘å¾®ä¿¡é˜…è¯»ä»»åŠ¡ï¼ˆé»˜è®¤ä½¿ç”¨manualæ¨¡å¼ï¼‰
    inputs:
      mode:
        description: 'è¿è¡Œæ¨¡å¼ (auto/manual)'
        required: false
        default: 'manual'  # é»˜è®¤æ”¹ä¸ºmanualæ¨¡å¼

jobs:
  deploy:
    runs-on: ubuntu-22.04
    environment: AutoRead

    steps:
    # ...ï¼ˆå‰ç½®æ­¥éª¤ä¿æŒä¸å˜ï¼‰...

    - name: â±ï¸ éšæœºå»¶è¿Ÿ
      if: github.event.inputs.mode == 'auto'  # ä»…è‡ªåŠ¨æ¨¡å¼è§¦å‘
      run: |
        DELAY=$((RANDOM % 21))
        sleep $((DELAY * 60))

    - name: ğŸ”¢ ç”ŸæˆREAD_NUM
      run: |
        if [[ "${{ github.event.inputs.mode }}" == "manual" ]]; then
          NUM=$((RANDOM % 61 + 60))   # 60-120ï¼ˆç­‰æ•ˆ30-60åˆ†é’Ÿï¼‰
          echo "ğŸ•¹ï¸ æ‰‹åŠ¨æ¨¡å¼ | èŒƒå›´: 60-120"
        else
          # ...ï¼ˆè‡ªåŠ¨æ¨¡å¼é€»è¾‘ä¿æŒä¸å˜ï¼‰...
        fi
