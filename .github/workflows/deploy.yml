name: lwxread

on:
  schedule:
    - cron: '00 14 * * *'           # 晚间任务：22:00（每天）
    - cron: '0 21 * * 1-5'          # 早间任务：05:00（周一到周五）
    - cron: '40 3 * * 1-5'          # 午间任务：11:40（周一到周五）
    - cron: '0 9 * * sat,sun'       # 周末任务：17:00（周六/日）
    - cron: '0 0 * * sat,sun'       # 周随机任务：08:00（周末）
  workflow_dispatch:
    description: 手动触发微信阅读任务（默认使用manual模式）
    inputs:
      mode:
        description: '运行模式 (auto/manual)'
        required: false
        default: 'manual'  # 默认改为manual模式

jobs:
  deploy:
    runs-on: ubuntu-22.04
    environment: AutoRead

    steps:
    # ...（前置步骤保持不变）...

    - name: ⏱️ 随机延迟
      if: github.event.inputs.mode == 'auto'  # 仅自动模式触发
      run: |
        DELAY=$((RANDOM % 21))
        sleep $((DELAY * 60))

    - name: 🔢 生成READ_NUM
      run: |
        if [[ "${{ github.event.inputs.mode }}" == "manual" ]]; then
          NUM=$((RANDOM % 61 + 60))   # 60-120（等效30-60分钟）
          echo "🕹️ 手动模式 | 范围: 60-120"
        else
          # ...（自动模式逻辑保持不变）...
        fi
